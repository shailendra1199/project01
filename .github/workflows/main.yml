name: Build Docker Image and push DockerHub

on:
  push:
    branches: [ "main" ]


jobs:
  main:
    name: Build and test
    runs-on: ubuntu-latest
    if: "!contains(github.event.head_commit.message, 'ci skips')"


  build:
    
    runs-on: ubuntu-latest
    if : "!contains(github.event.head_commit.message,'BUILD_CONTAINER_IMAGE')"
 

    steps:
    - uses: actions/checkout@v3
    - name: Scripts
      run: | 
        
        docker build -t app .
        docker login -u ${{secrets.DOCKER_USER}} -p ${{secrets.DOCKER_PASSWORD}}
        docker tag app targaryen1199/go_image232
        docker push targaryen1199/go_image232
        
        

